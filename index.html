<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game ITIL & Metodologias √Ågeis</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --primary: #4361ee;
    --secondary: #3a0ca3;
    --success: #4cc9f0;
    --danger: #f72585;
    --warning: #f8961e;
    --light: #f8f9fa;
    --dark: #212529;
    --background: #f5f7fa;
    --easy: #4ade80;
    --medium: #fbbf24;
    --hard: #f87171;
    --mode1: #4361ee;
    --mode2: #7209b7;
  }
  
  * {
    box-sizing: border-box;
    transition: all 0.3s ease;
    margin: 0;
    padding: 0;
  }
  
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
    margin: 0;
    padding: 15px;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow-y: auto;
  }
  
  #game {
    background: white;
    max-width: 850px;
    width: 100%;
    margin: 0 auto;
    padding: 20px;
    border-radius: 18px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    position: relative;
    overflow: hidden;
  }
  
  #game::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 5px;
    background: linear-gradient(to right, var(--primary), var(--secondary));
    z-index: 10;
  }
  
  #welcomeMessage {
    text-align: center;
    margin-bottom: 20px;
    padding: 15px;
    background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(76, 201, 240, 0.1));
    border-radius: 12px;
    border-left: 5px solid var(--primary);
  }
  
  #welcomeMessage h1 {
    color: var(--secondary);
    font-size: 24px;
    margin-bottom: 10px;
    font-family: 'Orbitron', sans-serif;
  }
  
  #welcomeMessage p {
    font-size: 16px;
    color: #333;
  }
  
  #modeSelection {
    display: block;
    text-align: center;
    margin: 20px 0;
  }
  
  .mode-option {
    padding: 20px;
    margin: 15px 0;
    border-radius: 15px;
    cursor: pointer;
    font-size: 20px;
    font-weight: 700;
    transition: all 0.4s ease;
    border: 3px solid transparent;
    position: relative;
    overflow: hidden;
  }
  
  .mode-option::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.7s;
  }
  
  .mode-option:hover::before {
    left: 100%;
  }
  
  .mode-option:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
  }
  
  .mode1-option {
    background: linear-gradient(135deg, rgba(67, 97, 238, 0.15), rgba(76, 201, 240, 0.15));
    border-color: var(--mode1);
  }
  
  .mode2-option {
    background: linear-gradient(135deg, rgba(114, 9, 183, 0.15), rgba(236, 72, 153, 0.15));
    border-color: var(--mode2);
  }
  
  .mode-description {
    font-size: 14px;
    margin-top: 10px;
    color: #666;
    font-weight: normal;
  }
  
  #characterArea {
    background: linear-gradient(135deg, #e0e0e0, #f0f0f0);
    height: 120px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    margin-bottom: 15px;
    border: 2px solid var(--primary);
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
  }
  
  #character {
    font-size: 70px;
    position: absolute;
    left: 10px;
    transition: left 0.7s ease, transform 0.5s ease;
    filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2));
    animation: float 4s ease-in-out infinite;
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-10px) rotate(2deg); }
  }
  
  .character-jump {
    animation: jump 0.5s ease;
  }
  
  @keyframes jump {
    0%, 100% { transform: translateY(0); }
    25% { transform: translateY(-15px) rotate(-5deg); }
    75% { transform: translateY(-8px) rotate(5deg); }
  }
  
  .character-celebrate {
    animation: celebrate 0.8s ease infinite;
  }
  
  @keyframes celebrate {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.08) rotate(-8deg); }
    75% { transform: scale(1.08) rotate(8deg); }
  }
  
  .character-sad {
    animation: sad 0.5s ease;
  }
  
  @keyframes sad {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(5px) rotate(5deg); }
  }
  
  .character-thinking {
    animation: thinking 1.2s ease-in-out infinite;
  }
  
  @keyframes thinking {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-3px) scale(1.03); }
  }
  
  #stats {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
    background: var(--light);
    padding: 12px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    flex-wrap: wrap;
  }
  
  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 3px 6px;
    min-width: 70px;
  }
  
  .stat-value {
    font-family: 'Orbitron', sans-serif;
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 2px;
  }
  
  .stat-label {
    font-size: 10px;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.8px;
  }
  
  #score .stat-value {
    color: var(--primary);
  }
  
  #lives .stat-value {
    color: var(--danger);
  }
  
  #timer .stat-value {
    color: var(--secondary);
  }
  
  #streak .stat-value {
    color: #10b981;
  }
  
  .heart {
    color: var(--danger);
    margin: 0 1px;
    font-size: 16px;
    animation: heartbeat 1.5s infinite;
  }
  
  @keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
  }
  
  #progressBar {
    height: 8px;
    background: #e0e0e0;
    border-radius: 4px;
    margin-bottom: 15px;
    overflow: hidden;
    position: relative;
  }
  
  #progress {
    height: 100%;
    background: linear-gradient(to right, var(--success), var(--primary));
    width: 0%;
    transition: width 0.5s ease;
    border-radius: 4px;
  }
  
  h2 {
    color: var(--secondary);
    text-align: center;
    margin-bottom: 12px;
    font-size: 22px;
    margin-top: 3px;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
  }
  
  #story-narrative {
    font-size: 13px;
    margin-bottom: 12px;
    padding: 10px;
    background: linear-gradient(to right, rgba(67, 97, 238, 0.1), rgba(76, 201, 240, 0.1));
    border-radius: 6px;
    border-left: 3px solid var(--primary);
    font-style: italic;
    display: none;
    line-height: 1.3;
  }
  
  #question {
    font-size: 16px;
    margin-bottom: 15px;
    padding: 12px;
    background: var(--light);
    border-radius: 10px;
    border-left: 4px solid var(--primary);
    line-height: 1.3;
    box-shadow: 0 3px 6px rgba(0,0,0,0.05);
  }
  
  .difficulty-tag {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.8px;
  }
  
  .easy-tag {
    background-color: var(--easy);
    color: #166534;
  }
  
  .medium-tag {
    background-color: var(--medium);
    color: #92400e;
  }
  
  .hard-tag {
    background-color: var(--hard);
    color: #991b1b;
  }
  
  #answers {
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    margin-bottom: 15px;
  }
  
  .answer-btn {
    padding: 11px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: white;
    color: var(--dark);
    font-size: 14px;
    text-align: left;
    box-shadow: 0 3px 6px rgba(0,0,0,0.08);
    border: 2px solid transparent;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
  }
  
  .answer-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.7s;
  }
  
  .answer-btn:hover::before {
    left: 100%;
  }
  
  .answer-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.12);
    border-color: var(--primary);
  }
  
  .answer-btn.correct {
    background: var(--success);
    color: white;
    animation: pulse 0.5s;
    border-color: #0ea5e9;
  }
  
  .answer-btn.incorrect {
    background: var(--danger);
    color: white;
    animation: shake 0.4s;
    border-color: #db2777;
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); }
  }
  
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    75% { transform: translateX(4px); }
  }
  
  #feedback {
    padding: 12px;
    border-radius: 10px;
    margin-bottom: 15px;
    display: none;
    animation: fadeIn 0.5s;
    font-size: 13px;
    line-height: 1.3;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  #feedback.correct {
    background: rgba(76, 201, 240, 0.2);
    border-left: 4px solid var(--success);
  }
  
  #feedback.incorrect {
    background: rgba(247, 37, 133, 0.2);
    border-left: 4px solid var(--danger);
  }
  
  #nextBtn, #startBtn, #reviewBtn, #difficultyBtn, #modeBtn, #backToModeBtn {
    padding: 12px;
    width: 100%;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: var(--primary);
    color: white;
    font-size: 15px;
    font-weight: 700;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
    margin-top: 8px;
    font-family: 'Poppins', sans-serif;
    letter-spacing: 0.8px;
  }
  
  #nextBtn:hover, #startBtn:hover, #reviewBtn:hover, #difficultyBtn:hover, #modeBtn:hover, #backToModeBtn:hover {
    background: var(--secondary);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  }
  
  #reviewBtn {
    background: var(--warning);
  }
  
  #reviewBtn:hover {
    background: #e07c00;
  }
  
  #difficultyBtn {
    background: linear-gradient(to right, var(--easy), var(--medium), var(--hard));
    display: none;
  }
  
  #modeBtn {
    background: linear-gradient(to right, var(--mode1), var(--mode2));
    display: none;
  }
  
  #backToModeBtn {
    background: linear-gradient(to right, #666, #999);
    display: none;
  }
  
  #achievements {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: 15px;
    flex-wrap: wrap;
    max-height: 50px;
    overflow: hidden;
  }
  
  .achievement {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    background: #e0e0e0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    opacity: 0.3;
    transition: all 0.3s ease;
    position: relative;
    box-shadow: 0 3px 6px rgba(0,0,0,0.08);
  }
  
  .achievement.unlocked {
    opacity: 1;
    transform: scale(1.08);
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    animation: achievementUnlock 0.6s ease;
  }
  
  @keyframes achievementUnlock {
    0% { transform: scale(0.5) rotate(0deg); }
    50% { transform: scale(1.1) rotate(180deg); }
    100% { transform: scale(1.08) rotate(360deg); }
  }
  
  .achievement-tooltip {
    position: absolute;
    bottom: 40px;
    background: var(--dark);
    color: white;
    padding: 5px 9px;
    border-radius: 5px;
    font-size: 10px;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
    z-index: 100;
  }
  
  .achievement:hover .achievement-tooltip {
    opacity: 1;
  }
  
  .level-indicator {
    position: absolute;
    top: 6px;
    right: 10px;
    background: linear-gradient(to right, var(--primary), var(--secondary));
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: bold;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    z-index: 10;
    font-family: 'Orbitron', sans-serif;
  }
  
  .mode-indicator {
    position: absolute;
    top: 6px;
    left: 10px;
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: bold;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    z-index: 10;
    font-family: 'Orbitron', sans-serif;
  }
  
  .mode1-indicator {
    background: linear-gradient(to right, var(--mode1), #3a56c4);
  }
  
  .mode2-indicator {
    background: linear-gradient(to right, var(--mode2), #9d4edd);
  }
  
  .timer-warning {
    animation: blink 0.8s infinite;
    color: var(--danger) !important;
  }
  
  .timer-critical {
    animation: criticalBlink 0.5s infinite;
    color: var(--danger) !important;
  }
  
  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }
  
  @keyframes criticalBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  
  .certificate {
    display: none;
    text-align: center;
    padding: 20px;
    border: 5px double var(--primary);
    border-radius: 12px;
    background: #f9f9f9;
    margin-top: 15px;
    animation: fadeIn 0.8s;
  }
  
  .certificate h3 {
    color: var(--secondary);
    font-size: 22px;
    margin-bottom: 10px;
    font-family: 'Orbitron', sans-serif;
  }
  
  .certificate p {
    font-size: 14px;
    margin: 8px 0;
  }
  
  .stars {
    font-size: 28px;
    margin: 12px 0;
    animation: pulse 2s infinite;
  }
  
  .final-message {
    font-size: 18px;
    font-weight: bold;
    margin: 15px 0;
    padding: 12px;
    border-radius: 10px;
    background: var(--light);
  }
  
  .manager-ready {
    background: rgba(76, 201, 240, 0.3);
    border-left: 4px solid var(--success);
  }
  
  .needs-improvement {
    background: rgba(247, 37, 133, 0.2);
    border-left: 4px solid var(--danger);
  }
  
  .almost-ready {
    background: rgba(248, 150, 30, 0.2);
    border-left: 4px solid var(--warning);
  }
  
  .streak-badge {
    position: absolute;
    top: 12px;
    left: 12px;
    background: linear-gradient(to right, #10b981, #34d399);
    color: white;
    padding: 4px 9px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: bold;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    display: none;
    z-index: 10;
    animation: pulse 1.5s infinite;
  }
  
  #difficultySelection {
    display: none;
    text-align: center;
    margin: 12px 0;
  }
  
  .difficulty-option {
    padding: 12px;
    margin: 8px 0;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 700;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }
  
  .difficulty-option:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.12);
  }
  
  .easy-option {
    background-color: rgba(74, 222, 128, 0.2);
    border-color: var(--easy);
  }
  
  .medium-option {
    background-color: rgba(251, 191, 36, 0.2);
    border-color: var(--medium);
  }
  
  .hard-option {
    background-color: rgba(248, 113, 113, 0.2);
    border-color: var(--hard);
  }
  
  .difficulty-description {
    font-size: 12px;
    margin-top: 5px;
    color: #666;
  }
  
  .countdown-sound {
    display: none;
  }
  
  .mode-progress {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px 0;
    gap: 5px;
  }
  
  .mode-progress-item {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #e0e0e0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
  }
  
  .mode-progress-item.active {
    background: var(--primary);
    color: white;
    transform: scale(1.1);
  }
  
  .mode-progress-item.completed {
    background: var(--success);
    color: white;
  }
  
  @media (max-width: 768px) {
    body {
      padding: 10px;
    }
    
    #game {
      padding: 15px;
      border-radius: 15px;
    }
    
    #character {
      font-size: 60px;
    }
    
    #characterArea {
      height: 100px;
    }
    
    #question {
      font-size: 15px;
    }
    
    .answer-btn {
      font-size: 13px;
      padding: 10px;
    }
    
    h2 {
      font-size: 18px;
    }
    
    .stat-value {
      font-size: 18px;
    }
    
    .stat-label {
      font-size: 9px;
    }
    
    #nextBtn, #startBtn, #reviewBtn, #difficultyBtn, #modeBtn, #backToModeBtn {
      font-size: 14px;
      padding: 10px;
    }
    
    .certificate h3 {
      font-size: 18px;
    }
    
    .certificate p {
      font-size: 13px;
    }
  }
  
  @media (max-height: 750px) {
    #characterArea {
      height: 90px;
    }
    
    #character {
      font-size: 55px;
    }
    
    #question {
      font-size: 14px;
      padding: 10px;
      margin-bottom: 12px;
    }
    
    #answers {
      gap: 8px;
      margin-bottom: 12px;
    }
    
    .answer-btn {
      padding: 9px;
      font-size: 13px;
    }
    
    #feedback {
      padding: 10px;
      font-size: 12px;
      margin-bottom: 12px;
    }
    
    #achievements {
      margin-top: 12px;
    }
    
    .achievement {
      width: 30px;
      height: 30px;
      font-size: 14px;
    }
  }
</style>
</head>
<body>
<div id="game">
  <div class="level-indicator">N√≠vel <span id="currentLevel">1</span></div>
  <div class="mode-indicator mode1-indicator" id="modeIndicator" style="display: none;">Modo 1</div>
  <div class="streak-badge" id="streakBadge">üî• Seq: <span id="streakCount">0</span></div>
  
  <div id="welcomeMessage">
    <h1>üéÆ Bem-vindo ao Jogo ITIL & Metodologias em Projetos de T.I.</h1>
    <p>Teste seus conhecimentos e habilidades para gerenciar projetos de TI com excel√™ncia!</p>
  </div>
  
  <div id="characterArea">
    <div id="character">üßë‚Äçüíª</div>
  </div>
  
  <div id="stats">
    <div class="stat-item" id="score">
      <div class="stat-value">0</div>
      <div class="stat-label">Pontos</div>
    </div>
    <div class="stat-item" id="lives">
      <div class="stat-value" id="hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
      <div class="stat-label">Vidas</div>
    </div>
    <div class="stat-item" id="timer">
      <div class="stat-value" id="timeLeft">20</div>
      <div class="stat-label">Segundos</div>
    </div>
    <div class="stat-item" id="streak">
      <div class="stat-value" id="streakValue">0</div>
      <div class="stat-label">Sequ√™ncia</div>
    </div>
  </div>
  
  <div id="progressBar">
    <div id="progress"></div>
  </div>
  
  <div id="modeProgress" class="mode-progress" style="display: none;"></div>
  
  <h2 id="title">Escolha o Modo do Jogo</h2>
  
  <div id="story-narrative"></div>
  
  <div id="question">Selecione um modo para come√ßar sua jornada na gest√£o de projetos de TI!</div>
  
  <div id="modeSelection">
    <div class="mode-option mode1-option" onclick="selectMode(1)">
      üß† MODO 1 - Desafio de Conhecimento
      <div class="mode-description">Teste seus conhecimentos te√≥ricos sobre ITIL, Scrum e Kanban. Avance de n√≠vel ap√≥s completar as 3 perguntas de cada n√≠vel!</div>
    </div>
    <div class="mode-option mode2-option" onclick="selectMode(2)">
      üè¢ MODO 2 - Simula√ß√£o Real de Empresa
      <div class="mode-description">Enfrente situa√ß√µes reais de uma empresa. Tome decis√µes que afetam o projeto e a equipe!</div>
    </div>
  </div>
  
  <div id="difficultySelection">
    <h3>Escolha o N√≠vel de Dificuldade:</h3>
    <div class="difficulty-option easy-option" onclick="selectDifficulty('easy')">
      üü¢ F√ÅCIL
      <div class="difficulty-description">Conceitos b√°sicos de ITIL e √Ågil</div>
    </div>
    <div class="difficulty-option medium-option" onclick="selectDifficulty('medium')">
      üü° M√âDIO
      <div class="difficulty-description">Boas pr√°ticas e casos reais</div>
    </div>
    <div class="difficulty-option hard-option" onclick="selectDifficulty('hard')">
      üî¥ DIF√çCIL
      <div class="difficulty-description">Cen√°rios Complexos</div>
    </div>
  </div>
  
  <div id="answers"></div>
  
  <div id="feedback"></div>
  
  <button id="startBtn" onclick="startGame()" style="display: none;">üéÆ Iniciar Jogo</button>
  <button id="difficultyBtn" onclick="showDifficultySelection()" style="display: none;">üìä Alterar Dificuldade</button>
  <button id="modeBtn" onclick="showModeSelection()" style="display: none;">üîÑ Trocar Modo</button>
  <button id="backToModeBtn" onclick="backToModeSelection()" style="display: none;">‚¨ÖÔ∏è Voltar aos Modos</button>
  <button id="nextBtn" onclick="nextQuestion()" style="display: none;">‚è≠Ô∏è Pr√≥xima</button>
  <button id="reviewBtn" onclick="showReview()" style="display: none;">üìö Revisar</button>
  
  <div id="achievements">
    <div class="achievement" id="ach1">üöÄ<div class="achievement-tooltip">Iniciante √Ågil</div></div>
    <div class="achievement" id="ach2">‚≠ê<div class="achievement-tooltip">Especialista Kanban</div></div>
    <div class="achievement" id="ach3">üèÜ<div class="achievement-tooltip">Mestre Scrum</div></div>
    <div class="achievement" id="ach4">üí°<div class="achievement-tooltip">S√°bio ITIL</div></div>
    <div class="achievement" id="ach5">üëë<div class="achievement-tooltip">L√≠der de Projetos</div></div>
  </div>
  
  <div id="certificate" class="certificate">
    <h3>üéì Certificado</h3>
    <p>Parab√©ns por completar o Game ITIL & √Ågeis!</p>
    <div class="stars" id="certificateStars"></div>
    <p id="certificateMessage"></p>
    <div class="final-message" id="finalMessage"></div>
    <p>Voc√™ est√° cada vez mais preparado para gerenciar projetos!</p>
  </div>
  
  <!-- Elemento de √°udio para contagem regressiva -->
  <audio id="countdownSound" class="countdown-sound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3" type="audio/mpeg">
  </audio>
  
  <!-- Elemento de √°udio para tempo esgotado -->
  <audio id="timeoutSound" class="countdown-sound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3" type="audio/mpeg">
  </audio>
</div>

<script>
const characters = ["üßë‚Äçüíª", "üßë‚Äçüîß", "üßë‚Äçüè´", "üßë‚ÄçüöÄ", "üßô‚Äç‚ôÇÔ∏è", "ü¶∏", "üßë‚Äçüíº", "üë®‚Äçüöí"];
let level = 0;
let questionIndex = 0;
let score = 0;
let lives = 3;
let streak = 0;
let timer;
let timeLeft = 20;
let gameStarted = false;
let wrongAnswers = [];
let currentDifficulty = 'medium';
let currentMode = 0; // 0 = n√£o selecionado, 1 = Desafio, 2 = Simula√ß√£o
let correctInLevel = 0; // Contador de acertos no n√≠vel atual (para Modo 1)
let storyChapter = 0;
let countdownSoundPlaying = false;
let countdownStarted = false;
let currentQuestionData = null;

// Configura√ß√µes atualizadas
const difficultySettings = {
  easy: { time: 25, points: 5, lives: 3 },
  medium: { time: 20, points: 8, lives: 3 },
  hard: { time: 15, points: 10, lives: 3 }
};

const storyNarratives = {
  1: [
    "üéØ MODO DESAFIO: N√≠vel 1 - Teste seus conhecimentos b√°sicos sobre ITIL e m√©todos √°geis.",
    "üéØ MODO DESAFIO: N√≠vel 2 - Conceitos intermedi√°rios sobre gest√£o de servi√ßos e projetos.",
    "üéØ MODO DESAFIO: N√≠vel 3 - Situa√ß√µes avan√ßadas de tomada de decis√£o em TI."
  ],
  2: [
    "üè¢ SIMULA√á√ÉO REAL: Dia 1 - Voc√™ foi contratado como Analista de Service Desk. Seu primeiro desafio √© entender os processos de incidentes.",
    "üè¢ SIMULA√á√ÉO REAL: Semana 2 - Um problema cr√≠tico afeta o sistema financeiro. Como voc√™ vai priorizar as a√ß√µes?",
    "üè¢ SIMULA√á√ÉO REAL: M√™s 1 - Promovido a Coordenador de TI. Agora precisa gerenciar mudan√ßas e implementar pr√°ticas √°geis."
  ]
};

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// Modo 1: Desafio de Conhecimento (avan√ßa ap√≥s 3 perguntas)
const mode1Levels = {
  easy: [
    {
      title: "Fundamentos B√°sicos",
      questions: [
        { 
          q: "O que significa ITIL?", 
          a: [
            "Information Technology Infrastructure Library", 
            "Internet Technology Infrastructure Library", 
            "International Technology Information Language"
          ], 
          c: 0,
          explanation: "ITIL significa Information Technology Infrastructure Library. √â um framework de boas pr√°ticas para gerenciamento de servi√ßos de TI.",
          learning: "ITIL ajuda a alinhar servi√ßos de TI com necessidades de neg√≥cios atrav√©s de processos padronizados."
        },
        { 
          q: "Qual √© o principal objetivo do Scrum?", 
          a: [
            "Entregar valor em ciclos curtos (Sprints)", 
            "Documenta√ß√£o extensa de processos", 
            "Controlar rigidamente o cronograma do projeto"
          ], 
          c: 0,
          explanation: "Scrum visa entregar valor incremental em ciclos curtos chamados Sprints, permitindo adapta√ß√£o constante.",
          learning: "Scrum promove transpar√™ncia, inspe√ß√£o e adapta√ß√£o atrav√©s de eventos como Daily Scrum e Sprint Review."
        },
        { 
          q: "O que √© um 'Incidente' no ITIL?", 
          a: [
            "Uma interrup√ß√£o n√£o planejada de um servi√ßo", 
            "Uma mudan√ßa planejada no sistema", 
            "Um novo recurso solicitado pelos usu√°rios"
          ], 
          c: 0,
          explanation: "Incidente √© qualquer interrup√ß√£o n√£o planejada de um servi√ßo ou redu√ß√£o na qualidade do servi√ßo.",
          learning: "O Gerenciamento de Incidentes visa restaurar a opera√ß√£o normal do servi√ßo o mais r√°pido poss√≠vel."
        }
      ]
    },
    {
      title: "Conceitos Intermedi√°rios",
      questions: [
        { 
          q: "Quem √© o Product Owner no Scrum?", 
          a: [
            "O representante dos stakeholders e dono do produto", 
            "O gerente do projeto", 
            "O l√≠der t√©cnico da equipe"
          ], 
          c: 0,
          explanation: "O Product Owner representa os stakeholders e √© respons√°vel por maximizar o valor do produto.",
          learning: "O PO gerencia o Product Backlog, priorizando itens baseados no valor de neg√≥cio."
        },
        { 
          q: "O Manifesto √Ågil foi criado em que ano?", 
          a: ["2001", "1999", "2010"], 
          c: 0,
          explanation: "O Manifesto √Ågil foi criado em 2001 por 17 profissionais de software que se reuniram para discutir m√©todos de desenvolvimento leves.",
          learning: "O Manifesto √Ågil valoriza: Indiv√≠duos e intera√ß√µes, Software funcionando, Colabora√ß√£o com o cliente, Responder a mudan√ßas."
        },
        { 
          q: "Quem criou o Kanban?", 
          a: ["Taiichi Ohno (Toyota)", "Ken Schwaber", "Jeff Sutherland"], 
          c: 0,
          explanation: "Taiichi Ohno, um engenheiro da Toyota, desenvolveu o Kanban na d√©cada de 1940 como um sistema de controle de produ√ß√£o.",
          learning: "Kanban significa 'cart√£o' ou 'sinaliza√ß√£o' em japon√™s e foi adaptado para desenvolvimento de software por David J. Anderson."
        }
      ]
    },
    {
      title: "Tomada de Decis√£o",
      questions: [
        { 
          q: "Como Gerente de Servi√ßos, voc√™ precisa reduzir custos em 20%. Qual abordagem ITIL priorizaria?", 
          a: [
            "Cortar servi√ßos menos cr√≠ticos identificados pelo Cat√°logo de Servi√ßos", 
            "Reduzir pessoal do Service Desk imediatamente", 
            "Adiar todas as mudan√ßas planejadas sem an√°lise"
          ], 
          c: 0,
          explanation: "O Cat√°logo de Servi√ßos permite identificar servi√ßos por valor de neg√≥cio, facilitando cortes estrat√©gicos.",
          learning: "ITIL ajuda a tomar decis√µes baseadas no valor do neg√≥cio, n√£o apenas em custos operacionais."
        },
        { 
          q: "Um problema recorrente afeta um servi√ßo cr√≠tico. A solu√ß√£o permanente levar√° 3 meses. O que fazer enquanto isso?", 
          a: [
            "Implementar workaround e comunicar aos usu√°rios", 
            "Ignorar at√© a solu√ß√£o permanente", 
            "Desativar o servi√ßo completamente"
          ], 
          c: 0,
          explanation: "Workarounds tempor√°rios podem mitigar impactos enquanto a solu√ß√£o permanente √© desenvolvida.",
          learning: "Gerenciamento de Problemas visa encontrar causa raiz, mas workarounds s√£o aceit√°veis para reduzir impacto."
        },
        { 
          q: "Dois departamentos pedem funcionalidades conflitantes. Como Product Owner, como prioriza?", 
          a: [
            "Baseado no ROI e alinhamento estrat√©gico", 
            "Quem pediu primeiro", 
            "O departamento com maior poder hier√°rquico"
          ], 
          c: 0,
          explanation: "Decis√µes devem ser baseadas em valor de neg√≥cio (ROI) e alinhamento com objetivos estrat√©gicos.",
          learning: "O Product Owner deve balancear necessidades de m√∫ltiplos stakeholders com a vis√£o do produto."
        }
      ]
    }
  ],
  medium: [
    {
      title: "Boas Pr√°ticas",
      questions: [
        { 
          q: "Um servi√ßo cr√≠tico caiu. Qual processo do ITIL deve ser acionado primeiro?", 
          a: [
            "Gerenciamento de Incidentes", 
            "Gerenciamento de Mudan√ßas", 
            "Gerenciamento de Capacidade"
          ], 
          c: 0,
          explanation: "O Gerenciamento de Incidentes deve ser acionado primeiro para restaurar o servi√ßo o mais r√°pido poss√≠vel.",
          learning: "Ap√≥s restaurar o servi√ßo, investigue a causa raiz atrav√©s do Gerenciamento de Problemas."
        },
        { 
          q: "Sua equipe Scrum est√° atrasando entregas. O que voc√™ analisaria primeiro?", 
          a: [
            "Revisar a capacidade da equipe e tamanho das hist√≥rias", 
            "Aumentar a dura√ß√£o das Sprints", 
            "Contratar mais desenvolvedores imediatamente"
          ], 
          c: 0,
          explanation: "O primeiro passo √© revisar a capacidade da equipe e o tamanho das hist√≥rias para garantir que s√£o realistas.",
          learning: "Scrum promove inspe√ß√£o e adapta√ß√£o. Use a Retrospectiva para identificar e resolver impedimentos."
        },
        { 
          q: "Um usu√°rio relata lentid√£o no sistema. Isso √© considerado:", 
          a: [
            "Um incidente", 
            "Uma mudan√ßa", 
            "Um problema"
          ], 
          c: 0,
          explanation: "Qualquer redu√ß√£o na qualidade do servi√ßo √© considerada um incidente no ITIL.",
          learning: "Incidentes podem ser classificados por impacto e urg√™ncia para prioriza√ß√£o adequada."
        }
      ]
    },
    {
      title: "Integra√ß√£o de Metodologias",
      questions: [
        { 
          q: "Como integrar ITIL com DevOps?", 
          a: [
            "Usar ITIL para governan√ßa e DevOps para entrega cont√≠nua", 
            "Substituir ITIL completamente por DevOps", 
            "Manter as equipes separadas sem integra√ß√£o"
          ], 
          c: 0,
          explanation: "ITIL fornece governan√ßa e estrutura, enquanto DevOps foca na entrega r√°pida e automa√ß√£o.",
          learning: "A combina√ß√£o ITIL+DevOps cria um ambiente controlado mas √°gil."
        },
        { 
          q: "Qual pr√°tica do Scrum pode ser usada com Kanban?", 
          a: [
            "Reuni√µes di√°rias (Daily Stand-up)", 
            "Sprints fixas de 2 semanas", 
            "Planning Poker obrigat√≥rio"
          ], 
          c: 0,
          explanation: "As reuni√µes di√°rias s√£o √∫teis em qualquer metodologia √°gil, incluindo Kanban.",
          learning: "Kanban √© mais flex√≠vel quanto a ciclos de entrega, mas mant√©m a comunica√ß√£o di√°ria."
        },
        { 
          q: "Como o ITIL v4 aborda m√©todos √°geis?", 
          a: [
            "Inclui pr√°ticas √°geis como parte do framework", 
            "Rejeita completamente m√©todos √°geis", 
            "Recomenda apenas metodologias tradicionais"
          ], 
          c: 0,
          explanation: "ITIL v4 incorpora pr√°ticas √°geis e DevOps em sua estrutura.",
          learning: "ITIL evoluiu para se adaptar aos novos paradigmas de entrega de TI."
        }
      ]
    },
    {
      title: "Gest√£o Avan√ßada",
      questions: [
        { 
          q: "Como medir o ROI de pr√°ticas ITIL?", 
          a: [
            "Redu√ß√£o de tempo de inatividade e aumento da satisfa√ß√£o", 
            "N√∫mero de certifica√ß√µes da equipe", 
            "Quantidade de documenta√ß√£o produzida"
          ], 
          c: 0,
          explanation: "O ROI do ITIL √© medito por m√©tricas de neg√≥cio como disponibilidade e satisfa√ß√£o do cliente.",
          learning: "ITIL deve demonstrar valor tang√≠vel para o neg√≥cio."
        },
        { 
          q: "Qual √© o papel do Scrum Master?", 
          a: [
            "Facilitar o processo Scrum e remover impedimentos", 
            "Gerenciar o cronograma do projeto", 
            "Tomar decis√µes t√©cnicas pela equipe"
          ], 
          c: 0,
          explanation: "O Scrum Master √© um l√≠der servidor que remove impedimentos e garante que o Scrum seja seguido.",
          learning: "Scrum Master n√£o √© gerente de projeto, mas facilitador do processo."
        },
        { 
          q: "Como priorizar mudan√ßas no ITIL?", 
          a: [
            "Baseado no impacto e urg√™ncia", 
            "Por ordem de chegada", 
            "Pelo cargo de quem solicitou"
          ], 
          c: 0,
          explanation: "Mudan√ßas s√£o priorizadas com base em impacto no neg√≥cio e urg√™ncia da implementa√ß√£o.",
          learning: "O Comit√™ de Avalia√ß√£o de Mudan√ßas (CAB) ajuda nessa prioriza√ß√£o."
        }
      ]
    }
  ],
  hard: [
    {
      title: "Cen√°rios Complexos",
      questions: [
        { 
          q: "Como Gerente de TI, voc√™ descobre uma vulnerabilidade cr√≠tica. O patch levar√° 48h para ser testado. O que fazer?", 
          a: [
            "Aplicar processo de mudan√ßa emergencial com avalia√ß√£o de risco", 
            "Aplicar o patch imediatamente em produ√ß√£o", 
            "Esperar o ciclo normal de mudan√ßas (5 dias)"
          ], 
          c: 0,
          explanation: "Mudan√ßas emergenciais t√™m um processo acelerado mas ainda requerem avalia√ß√£o e autoriza√ß√£o apropriadas.",
          learning: "Mesmo em emerg√™ncias, √© importante seguir processos controlados para minimizar riscos."
        },
        { 
          q: "A empresa sofre um ataque de ransomware. Qual processo do ITIL deve ser acionado primeiro?", 
          a: [
            "Gerenciamento de Incidentes com ativa√ß√£o do plano de continuidade", 
            "Gerenciamento de Mudan√ßas", 
            "Gerenciamento de Problemas"
          ], 
          c: 0,
          explanation: "Em um ataque de ransomware, √© cr√≠tico acionar o gerenciamento de incidentes e o plano de continuidade de neg√≥cios.",
          learning: "ITIL tem processos de gerenciamento de continuidade de servi√ßos para lidar com desastres."
        },
        { 
          q: "Dois projetos estrat√©gicos competem por recursos limitados. Como decidir?", 
          a: [
            "Usar an√°lise de valor de neg√≥cio e portf√≥lio de servi√ßos", 
            "Escolher o projeto do patrocinador mais alto", 
            "Dividir recursos igualmente, mesmo que ambos falhem"
          ], 
          c: 0,
          explanation: "O portf√≥lio de servi√ßos no ITIL ajuda a priorizar investimentos com base no valor de neg√≥cio.",
          learning: "Decis√µes de portf√≥lio devem ser tomadas com base em dados objetivos de retorno e alinhamento estrat√©gico."
        }
      ]
    },
    {
      title: "Transforma√ß√£o Digital",
      questions: [
        { 
          q: "Como liderar uma transforma√ß√£o digital usando ITIL e √°gil?", 
          a: [
            "Usar ITIL para governan√ßa e √°gil para execu√ß√£o iterativa", 
            "Focar apenas em tecnologia nova", 
            "Contratar consultores externos para tomar todas as decis√µes"
          ], 
          c: 0,
          explanation: "A combina√ß√£o de governan√ßa (ITIL) e execu√ß√£o √°gil √© ideal para transforma√ß√µes digitais.",
          learning: "Transforma√ß√£o requer tanto estrutura quanto flexibilidade."
        },
        { 
          q: "Qual m√©trica √© mais importante em DevOps?", 
          a: [
            "Tempo entre commit e produ√ß√£o (Lead Time)", 
            "N√∫mero de reuni√µes realizadas", 
            "Quantidade de c√≥digo escrito"
          ], 
          c: 0,
          explanation: "O Lead Time mede a efici√™ncia do pipeline de entrega cont√≠nua.",
          learning: "DevOps busca reduzir o tempo entre ideia e entrega de valor."
        },
        { 
          q: "Como alinhar TI com objetivos de neg√≥cio?", 
          a: [
            "Usar balanced scorecard e indicadores-chave de desempenho", 
            "Focar apenas em reduzir custos de TI", 
            "Delegar completamente para a diretoria"
          ], 
          c: 0,
          explanation: "Indicadores alinhados com neg√≥cio mostram o valor real da TI.",
          learning: "TI deve falar a linguagem do neg√≥cio, n√£o apenas a t√©cnica."
        }
      ]
    },
    {
      title: "Lideran√ßa Estrat√©gica",
      questions: [
        { 
          q: "Como convencer a diretoria a investir em ITIL?", 
          a: [
            "Mostrar ROI atrav√©s de casos de neg√≥cio", 
            "Falar sobre certifica√ß√µes internacionais", 
            "Amea√ßar com riscos de seguran√ßa"
          ], 
          c: 0,
          explanation: "A diretoria responde a argumentos de neg√≥cio, n√£o t√©cnicos.",
          learning: "Business cases devem mostrar benef√≠cios tang√≠veis em receita ou redu√ß√£o de custos."
        },
        { 
          q: "Qual o papel do CIO na era √°gil?", 
          a: [
            "L√≠der de transforma√ß√£o e habilitador de neg√≥cios", 
            "Apenas gestor de infraestrutura", 
            "Controlador de custos"
          ], 
          c: 0,
          explanation: "O CIO moderno √© um estrategista que usa TI para habilitar neg√≥cios.",
          learning: "TI deixou de ser custo para ser investimento estrat√©gico."
        },
        { 
          q: "Como gerenciar equipes distribu√≠das com Scrum?", 
          a: [
            "Usar ferramentas de colabora√ß√£o e ajustar cerim√¥nias", 
            "For√ßar presencialidade", 
            "Abandonar Scrum por m√©todos tradicionais"
          ], 
          c: 0,
          explanation: "Scrum pode ser adaptado para times distribu√≠dos com as ferramentas certas.",
          learning: "A comunica√ß√£o √© ainda mais cr√≠tica em times remotos."
        }
      ]
    }
  ]
};

// Modo 2: Simula√ß√£o Real de Empresa (tamb√©m 3 perguntas por n√≠vel)
const mode2Levels = {
  easy: [
    {
      title: "FASE 1 - Service Desk",
      questions: [
        { 
          q: "üìû Seu primeiro dia como Analista de Service Desk. Um usu√°rio relata que n√£o consegue acessar o sistema financeiro. Como voc√™ procede?", 
          a: [
            "Classificar como incidente cr√≠tico e acionar o procedimento de prioriza√ß√£o", 
            "Pedir para o usu√°rio tentar novamente amanh√£", 
            "Enviar um e-mail para o departamento de TI e aguardar"
          ], 
          c: 0,
          explanation: "Sistemas financeiros s√£o geralmente cr√≠ticos para o neg√≥cio. Incidentes cr√≠ticos devem ter tratamento priorit√°rio.",
          learning: "ITIL classifica incidentes por impacto (extens√£o do preju√≠zo) e urg√™ncia (quanto tempo pode esperar)."
        },
        { 
          q: "üîÑ Voc√™ recebe 3 chamados simult√¢neos: 1) Impressora n√£o funciona, 2) Sistema de vendas lento, 3) CEO sem acesso ao e-mail. Como prioriza?", 
          a: [
            "CEO sem e-mail (alto impacto), Sistema de vendas (m√©dio), Impressora (baixo)", 
            "Por ordem de chegada: Impressora, Sistema, CEO", 
            "Atender o mais r√°pido primeiro, independente do cargo"
          ], 
          c: 0,
          explanation: "Prioriza√ß√£o considera impacto no neg√≥cio. CEO sem e-mail pode afetar decis√µes importantes, sistema de vendas afeta receita.",
          learning: "Matriz de prioriza√ß√£o ITIL: Urg√™ncia (tempo para resolver) x Impacto (extens√£o da interrup√ß√£o)."
        },
        { 
          q: "üìä Ap√≥s 1 semana, voc√™ nota que 40% dos incidentes s√£o sobre a mesma impressora. Qual a√ß√£o tomar?", 
          a: [
            "Abrir um problema (Problem) para investigar a causa raiz", 
            "Continuar resolvendo um por um como incidentes", 
            "Sugerir compra de uma nova impressora sem an√°lise"
          ], 
          c: 0,
          explanation: "M√∫ltiplos incidentes relacionados indicam um problema subjacente que precisa de investiga√ß√£o da causa raiz.",
          learning: "Gerenciamento de Problemas visa identificar e resolver causas raiz de incidentes recorrentes."
        }
      ]
    },
    {
      title: "FASE 2 - Coordena√ß√£o de TI",
      questions: [
        { 
          q: "üìà Promovido a Coordenador! Precisa melhorar a entrega de projetos. Qual metodologia escolher para um projeto com requisitos incertos?", 
          a: [
            "Scrum, por ser iterativo e adaptativo", 
            "Cascata (Waterfall), por ser mais controlado", 
            "N√£o usar nenhuma metodologia, s√≥ come√ßar a desenvolver"
          ], 
          c: 0,
          explanation: "Scrum √© ideal para projetos com requisitos que podem mudar, permitindo adapta√ß√£o a cada sprint.",
          learning: "M√©todos √°geis como Scrum s√£o recomendados quando os requisitos n√£o s√£o totalmente conhecidos no in√≠cio."
        },
        { 
          q: "üõ†Ô∏è A equipe tem dificuldade com m√∫ltiplas tarefas. Como visualizar e limitar o trabalho em progresso?", 
          a: [
            "Implementar quadro Kanban com limites de WIP", 
            "Criar uma planilha Excel com todas as tarefas", 
            "Pedir para cada membro focar em apenas uma tarefa por vez"
          ], 
          c: 0,
          explanation: "Kanban usa visualiza√ß√£o do fluxo e limites de Work In Progress (WIP) para melhorar a efici√™ncia.",
          learning: "Limitar WIP ajuda a reduzir multitasking, aumentar o foco e identificar gargalos no processo."
        },
        { 
          q: "üíº Dois projetos importantes competem por recursos. Como decidir qual priorizar?", 
          a: [
            "Analisar valor de neg√≥cio, ROI e alinhamento estrat√©gico", 
            "Priorizar o projeto do gerente mais alto na hierarquia", 
            "Dividir recursos igualmente entre os dois projetos"
          ], 
          c: 0,
          explanation: "Decis√µes de prioriza√ß√£o devem ser baseadas no valor para o neg√≥cio, n√£o em influ√™ncias pol√≠ticas.",
          learning: "Portf√≥lio de servi√ßos no ITIL ajuda a gerenciar investimentos em TI baseados no valor de neg√≥cio."
        }
      ]
    },
    {
      title: "FASE 3 - Ger√™ncia de TI",
      questions: [
        { 
          q: "üè¢ Como novo Gerente de TI, precisa alinhar TI com neg√≥cios. Qual framework ITIL ajuda nisso?", 
          a: [
            "Estrat√©gia de Servi√ßo (Service Strategy)", 
            "Opera√ß√£o de Servi√ßo (Service Operation)", 
            "Transi√ß√£o de Servi√ßo (Service Transition)"
          ], 
          c: 0,
          explanation: "A Estrat√©gia de Servi√ßo no ITIL foca em alinhar servi√ßos de TI com necessidades de neg√≥cio.",
          learning: "ITIL v3 tem 5 fases: Estrat√©gia, Desenho, Transi√ß√£o, Opera√ß√£o e Melhoria Continua."
        },
        { 
          q: "üí∞ Precisa justificar investimento em TI para a diretoria. Qual m√©trica √© mais relevante?", 
          a: [
            "ROI (Retorno sobre Investimento) e valor de neg√≥cio", 
            "N√∫mero de incidentes resolvidos", 
            "Quantidade de horas trabalhadas"
          ], 
          c: 0,
          explanation: "A diretoria se preocupa com impacto financeiro e valor para o neg√≥cio, n√£o com m√©tricas operacionais.",
          learning: "Business Case no ITIL ajuda a justificar investimentos mostrando benef√≠cios, custos e riscos."
        },
        { 
          q: "üåê A empresa expande internacionalmente. Como garantir consist√™ncia nos servi√ßos globais?", 
          a: [
            "Padronizar processos baseados em ITIL e definir SLAs globais", 
            "Deixar cada filial definir seus pr√≥prios processos", 
            "Contratar consultores locais em cada pa√≠s"
          ], 
          c: 0,
          explanation: "Padroniza√ß√£o baseada em boas pr√°ticas como ITIL garante consist√™ncia e qualidade independente da localiza√ß√£o.",
          learning: "ITIL pode ser adaptado para diferentes culturas e tamanhos de organiza√ß√£o mantendo princ√≠pios fundamentais."
        }
      ]
    }
  ],
  medium: [
    {
      title: "FASE 1 - Service Desk Avan√ßado",
      questions: [
        { 
          q: "üìû Primeiro dia como Analista: usu√°rio n√£o acessa sistema financeiro. Como proceder?", 
          a: [
            "Classificar como incidente cr√≠tico e priorizar", 
            "Pedir para tentar novamente depois", 
            "Enviar e-mail para TI e aguardar"
          ], 
          c: 0,
          explanation: "Sistemas financeiros s√£o cr√≠ticos. Incidentes cr√≠ticos t√™m tratamento priorit√°rio no ITIL.",
          learning: "Classifica√ß√£o adequada de incidentes √© essencial para prioriza√ß√£o eficiente."
        },
        { 
          q: "üÜò Um incidente cr√≠tico ocorre √†s 18h. O procedimento diz para acionar o plant√£o, mas voc√™ sabe resolver. O que faz?", 
          a: [
            "Seguir o procedimento e acionar o plant√£o, documentando o que sabe", 
            "Tentar resolver sozinho para n√£o incomodar a equipe", 
            "Deixar para o pr√≥ximo dia √∫til"
          ], 
          c: 0,
          explanation: "Procedimentos existem para garantir consist√™ncia e controle. Mesmo sabendo resolver, √© importante seguir os processos estabelecidos.",
          learning: "Controle de mudan√ßas e processos bem definidos s√£o fundamentais para a qualidade do servi√ßo de TI."
        },
        { 
          q: "üë• A equipe est√° sobrecarregada. O gerente pede sugest√µes para melhorar. Qual abordagem ITIL voc√™ sugere?", 
          a: [
            "Implementar cat√°logo de servi√ßos e n√≠veis de servi√ßo (SLA)", 
            "Contratar mais analistas imediatamente", 
            "Reduzir o hor√°rio de atendimento para diminuir demanda"
          ], 
          c: 0,
          explanation: "Cat√°logo de servi√ßos e SLAs ajudam a gerenciar expectativas e priorizar demandas de forma estruturada.",
          learning: "Acordos de N√≠vel de Servi√ßo (SLAs) definem o que ser√° entregue, em que prazo e com qual qualidade."
        }
      ]
    },
    {
      title: "FASE 2 - Coordena√ß√£o de Projetos",
      questions: [
        { 
          q: "üö® Uma mudan√ßa urgente √© solicitada para corrigir vulnerabilidade cr√≠tica. Qual processo seguir?", 
          a: [
            "Processo de mudan√ßa emergencial com CAB (Comit√™ de Avalia√ß√£o) emergencial", 
            "Processo normal de mudan√ßa (pode levar 5 dias)", 
            "Implementar direto em produ√ß√£o por ser urgente"
          ], 
          c: 0,
          explanation: "Mudan√ßas emergenciais ainda precisam de avalia√ß√£o, mesmo que em processo acelerado com CAB emergencial.",
          learning: "ITIL define diferentes tipos de mudan√ßa: padr√£o, normal e emergencial, cada uma com seu fluxo apropriado."
        },
        { 
          q: "üìã Stakeholders reclamam que n√£o veem progresso nos projetos. Como melhorar a transpar√™ncia?", 
          a: [
            "Implementar reuni√µes de revis√£o de sprint e relat√≥rios de burndown", 
            "Enviar relat√≥rios semanais por e-mail", 
            "Marcar reuni√µes mensais de atualiza√ß√£o"
          ], 
          c: 0,
          explanation: "Scrum tem eventos como Sprint Review que mostram progresso tang√≠vel a cada ciclo.",
          learning: "Transpar√™ncia √© um dos tr√™s pilares do Scrum (juntamente com inspe√ß√£o e adapta√ß√£o)."
        },
        { 
          q: "ü§ù Implementa√ß√£o de DevOps encontra resist√™ncia cultural. Como abordar?", 
          a: [
            "Focar em colabora√ß√£o, pequenas vit√≥rias e mostrar benef√≠cios", 
            "For√ßar a ado√ß√£o com diretrizes r√≠gidas", 
            "Contratar nova equipe j√° familiar com DevOps"
          ], 
          c: 0,
          explanation: "Mudan√ßas culturais exigem tempo, comunica√ß√£o e demonstra√ß√£o de valor. Pequenas vit√≥rias ajudam a ganhar ades√£o.",
          learning: "DevOps une desenvolvimento (Dev) e opera√ß√µes (Ops) promovendo colabora√ß√£o, automa√ß√£o e entrega cont√≠nua."
        }
      ]
    },
    {
      title: "FASE 3 - Gest√£o Estrat√©gica",
      questions: [
        { 
          q: "üéØ Ap√≥s 1 ano, como medir o sucesso da transforma√ß√£o de TI?", 
          a: [
            "Satisfa√ß√£o do cliente, tempo de resolu√ß√£o, ROI de projetos", 
            "N√∫mero de certifica√ß√µes da equipe", 
            "Quantidade de servidores gerenciados"
          ], 
          c: 0,
          explanation: "Sucesso em TI deve ser medido pelo valor entregue ao neg√≥cio, n√£o apenas por m√©tricas t√©cnicas.",
          learning: "ITIL enfatiza medi√ß√£o e melhoria cont√≠nua baseada em feedback e m√©tricas de neg√≥cio."
        },
        { 
          q: "üè¢ Como Gerente de TI, descobre vulnerabilidade cr√≠tica. Patch testado em 48h. O que fazer?", 
          a: [
            "Aplicar mudan√ßa emergencial com avalia√ß√£o de risco", 
            "Aplicar patch imediatamente em produ√ß√£o", 
            "Esperar ciclo normal de mudan√ßas (5 dias)"
          ], 
          c: 0,
          explanation: "Mudan√ßas emergenciais ainda precisam de avalia√ß√£o controlada, mesmo em situa√ß√µes cr√≠ticas.",
          learning: "Processos de mudan√ßa devem balancear agilidade e controle de riscos."
        },
        { 
          q: "üåç A empresa est√° crescendo rapidamente. Como escalar processos de TI?", 
          a: [
            "Padronizar processos baseados em ITIL e automatizar onde poss√≠vel", 
            "Contratar mais pessoas para fazer o mesmo processo", 
            "Deixar cada departamento criar seus pr√≥prios processos"
          ], 
          c: 0,
          explanation: "Padroniza√ß√£o e automa√ß√£o s√£o chaves para escalar processos de TI eficientemente.",
          learning: "ITIL fornece processos padronizados que podem ser escalados com automa√ß√£o."
        }
      ]
    }
  ],
  hard: [
    {
      title: "FASE 1 - Crise e Resposta",
      questions: [
        { 
          q: "üî• Sistema de produ√ß√£o cai durante hor√°rio de pico. Qual √© sua primeira a√ß√£o como Gerente?", 
          a: [
            "Ativar plano de recupera√ß√£o de desastre e comunicar stakeholders", 
            "Culpar a equipe de opera√ß√µes", 
            "Esperar para ver se volta sozinho"
          ], 
          c: 0,
          explanation: "Em crises, comunica√ß√£o proativa e ativa√ß√£o de planos de conting√™ncia s√£o essenciais.",
          learning: "ITIL tem processos espec√≠ficos para gerenciamento de continuidade de servi√ßos."
        },
        { 
          q: "üí∏ Budget cortado em 30%. Como realinhar servi√ßos?", 
          a: [
            "Revisar cat√°logo de servi√ßos e priorizar por valor de neg√≥cio", 
            "Cortar servi√ßos aleatoriamente", 
            "Reduzir qualidade de todos os servi√ßos igualmente"
          ], 
          c: 0,
          explanation: "O cat√°logo de servi√ßos permite tomar decis√µes baseadas no valor de neg√≥cio, n√£o apenas em custos.",
          learning: "ITIL ajuda a gerenciar servi√ßos como um portf√≥lio, permitindo cortes estrat√©gicos."
        },
        { 
          q: "üë• Equipe altamente desmotivada ap√≥s mudan√ßa organizacional. Como lidar?", 
          a: [
            "Transpar√™ncia total, escuta ativa e pequenas vit√≥rias r√°pidas", 
            "Ignorar e focar apenas em resultados", 
            "Amea√ßar demiss√µes se performance n√£o melhorar"
          ], 
          c: 0,
          explanation: "Lideran√ßa em TI requer habilidades humanas al√©m de t√©cnicas.",
          learning: "Times motivados entregam muito mais valor do que times desmotivados."
        }
      ]
    },
    {
      title: "FASE 2 - Transforma√ß√£o Digital",
      questions: [
        { 
          q: "üîÑ Como liderar migra√ß√£o para nuvem mantendo conformidade?", 
          a: [
            "Faseada, com avalia√ß√£o de risco e plano de transi√ß√£o", 
            "Migrar tudo de uma vez para economizar", 
            "Terceirizar completamente sem supervis√£o"
          ], 
          c: 0,
          explanation: "Migra√ß√µes para nuvem requerem planejamento cuidadoso e gerenciamento de mudan√ßas.",
          learning: "ITIL fornece estrutura para gerenciar mudan√ßas complexas com m√≠nimo de risco."
        },
        { 
          q: "ü§ñ Como implementar IA/ML em processos de TI?", 
          a: [
            "Come√ßar com casos de uso espec√≠ficos e expandir gradualmente", 
            "Implementar solu√ß√µes complexas de uma vez", 
            "Ignorar por ser muito complexo"
          ], 
          c: 0,
          explanation: "IA/ML deve come√ßar com problemas bem definidos que ofere√ßam valor claro.",
          learning: "Inova√ß√£o em TI deve ser incremental e baseada em valor de neg√≥cio."
        },
        { 
          q: "üîí Viola√ß√£o de dados ocorre. Qual √© o protocolo ITIL a seguir?", 
          a: [
            "Ativar resposta a incidentes, notificar autoridades e investigar causa raiz", 
            "Esconder o incidente para proteger a imagem", 
            "Culpar um funcion√°rio espec√≠fico publicamente"
          ], 
          c: 0,
          explanation: "Transpar√™ncia e processo controlado s√£o essenciais em viola√ß√µes de seguran√ßa.",
          learning: "ITIL integra-se com frameworks de seguran√ßa como ISO 27001."
        }
      ]
    },
    {
      title: "FASE 3 - Lideran√ßa Executiva",
      questions: [
        { 
          q: "üéØ Como convencer o board a investir em transforma√ß√£o digital?", 
          a: [
            "Business case com ROI claro e benchmarking do setor", 
            "Apresentar apenas features t√©cnicas", 
            "Usar medo de ficar para tr√°s"
          ], 
          c: 0,
          explanation: "Executivos respondem a argumentos de neg√≥cio, n√£o t√©cnicos.",
          learning: "CIOs bem-sucedidos falam a linguagem do neg√≥cio."
        },
        { 
          q: "üåê Gerenciando equipes globais com fus√£o de culturas. Qual abordagem?", 
          a: [
            "Respeitar diferen√ßas culturais enquanto mant√©m padr√µes de qualidade", 
            "For√ßar cultura corporativa √∫nica", 
            "Delegar completamente para l√≠deres locais"
          ], 
          c: 0,
          explanation: "Lideran√ßa global requer sensibilidade cultural e adaptabilidade.",
          learning: "Processos padronizados podem ser adaptados a contextos culturais diferentes."
        },
        { 
          q: "üöÄ Preparando a organiza√ß√£o para o futuro. Qual √© sua estrat√©gia de inova√ß√£o?", 
          a: [
            "Or√ßamento dedicado para P&D e parcerias estrat√©gicas", 
            "Manter status quo at√© ser for√ßado a mudar", 
            "Copiar concorrentes sem an√°lise pr√≥pria"
          ], 
          c: 0,
          explanation: "Inova√ß√£o requer investimento intencional e cultura de experimenta√ß√£o.",
          learning: "TI deve ser tanto operacional quanto inovadora para sustentar vantagem competitiva."
        }
      ]
    }
  ]
};

// Inicializa√ß√£o
function initGame() {
  document.getElementById("modeSelection").style.display = "block";
  document.getElementById("difficultySelection").style.display = "none";
  document.getElementById("startBtn").style.display = "none";
  document.getElementById("modeBtn").style.display = "none";
  document.getElementById("backToModeBtn").style.display = "none";
  document.getElementById("characterArea").style.display = "block";
  document.getElementById("stats").style.display = "none";
  document.getElementById("progressBar").style.display = "none";
  document.getElementById("modeProgress").style.display = "none";
  document.getElementById("modeIndicator").style.display = "none";
  document.getElementById("answers").innerHTML = "";
  document.getElementById("feedback").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("reviewBtn").style.display = "none";
  document.getElementById("certificate").style.display = "none";
  document.getElementById("story-narrative").style.display = "none";
  
  document.getElementById("title").innerText = "Escolha o Modo do Jogo";
  document.getElementById("question").innerText = "Selecione um modo para come√ßar sua jornada na gest√£o de projetos de TI!";
  
  gameStarted = false;
  currentMode = 0;
  level = 0;
  questionIndex = 0;
  score = 0;
  lives = 3;
  streak = 0;
  correctInLevel = 0;
  wrongAnswers = [];
  countdownStarted = false;
  
  updateAllStats();
  updateCharacter();
  
  clearInterval(timer);
  stopCountdownSound();
}

function selectMode(mode) {
  currentMode = mode;
  
  // Atualizar indicador de modo
  const modeIndicator = document.getElementById("modeIndicator");
  modeIndicator.style.display = "block";
  modeIndicator.className = `mode-indicator mode${mode}-indicator`;
  modeIndicator.innerText = mode === 1 ? "MODO DESAFIO" : "MODO SIMULA√á√ÉO";
  
  // Mostrar sele√ß√£o de dificuldade
  document.getElementById("modeSelection").style.display = "none";
  document.getElementById("difficultySelection").style.display = "block";
  document.getElementById("backToModeBtn").style.display = "block";
  
  // Atualizar t√≠tulo
  document.getElementById("title").innerText = mode === 1 ? "Desafio de Conhecimento" : "Simula√ß√£o Real de Empresa";
  
  // Atualizar mensagem
  const modeDescription = mode === 1 
    ? "Teste seus conhecimentos sobre ITIL, Scrum e Kanban. Avance de n√≠vel ap√≥s completar as 3 perguntas de cada n√≠vel!" 
    : "Enfrente situa√ß√µes reais de uma empresa. Suas decis√µes afetam o projeto e a equipe!";
  document.getElementById("question").innerHTML = `<strong>${modeDescription}</strong><br><br>Selecione a dificuldade:`;
}

function backToModeSelection() {
  currentMode = 0;
  document.getElementById("modeSelection").style.display = "block";
  document.getElementById("difficultySelection").style.display = "none";
  document.getElementById("modeIndicator").style.display = "none";
  document.getElementById("backToModeBtn").style.display = "none";
  document.getElementById("title").innerText = "Escolha o Modo do Jogo";
  document.getElementById("question").innerText = "Selecione um modo para come√ßar sua jornada na gest√£o de projetos de TI!";
}

function selectDifficulty(difficulty) {
  currentDifficulty = difficulty;
  document.getElementById("title").innerHTML = currentMode === 1 
    ? `Desafio de Conhecimento - ${difficulty.toUpperCase()}` 
    : `Simula√ß√£o Real - ${difficulty.toUpperCase()}`;
  
  const settings = difficultySettings[difficulty];
  timeLeft = settings.time;
  document.getElementById("timeLeft").textContent = timeLeft;
  
  // Animar a sele√ß√£o
  const options = document.querySelectorAll('.difficulty-option');
  options.forEach(opt => opt.style.transform = 'scale(1)');
  event.currentTarget.style.transform = 'scale(1.05)';
  
  // Atualizar cor do indicador de n√≠vel
  const levelIndicator = document.querySelector('.level-indicator');
  if (difficulty === 'easy') {
    levelIndicator.style.background = 'linear-gradient(to right, var(--easy), #22c55e)';
  } else if (difficulty === 'medium') {
    levelIndicator.style.background = 'linear-gradient(to right, var(--medium), #f59e0b)';
  } else {
    levelIndicator.style.background = 'linear-gradient(to right, var(--hard), #dc2626)';
  }
  
  // Mostrar bot√£o para iniciar
  document.getElementById("startBtn").style.display = "block";
  document.getElementById("difficultySelection").style.display = "none";
}

function startGame() {
  level = 0;
  questionIndex = 0;
  score = 0;
  lives = difficultySettings[currentDifficulty].lives;
  streak = 0;
  correctInLevel = 0;
  gameStarted = true;
  wrongAnswers = [];
  countdownStarted = false;
  
  updateAllStats();
  updateCharacter();
  loadLevel();
  moveCharacter(0);
  updateProgressBar();
  updateLevelIndicator();
  updateModeProgress();
  
  document.getElementById("startBtn").style.display = "none";
  document.getElementById("difficultyBtn").style.display = "block";
  document.getElementById("modeBtn").style.display = "block";
  document.getElementById("backToModeBtn").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("reviewBtn").style.display = "none";
  document.getElementById("certificate").style.display = "none";
  document.getElementById("difficultySelection").style.display = "none";
  document.getElementById("modeSelection").style.display = "none";
  
  document.getElementById("stats").style.display = "flex";
  document.getElementById("progressBar").style.display = "block";
  document.getElementById("modeProgress").style.display = "flex";
  
  // Mostrar narrativa baseada no modo
  document.getElementById("story-narrative").style.display = "block";
  if (currentMode === 1 && storyNarratives[1] && storyNarratives[1][level]) {
    document.getElementById("story-narrative").textContent = storyNarratives[1][level];
  } else if (currentMode === 2 && storyNarratives[2] && storyNarratives[2][level]) {
    document.getElementById("story-narrative").textContent = storyNarratives[2][level];
  }
  
  startTimer();
  showStreakBadge();
}

function updateModeProgress() {
  const modeProgress = document.getElementById("modeProgress");
  modeProgress.innerHTML = "";
  
  const totalLevels = currentMode === 1 
    ? mode1Levels[currentDifficulty].length 
    : mode2Levels[currentDifficulty].length;
  
  for (let i = 0; i < totalLevels; i++) {
    const progressItem = document.createElement("div");
    progressItem.className = "mode-progress-item";
    
    if (i < level) {
      progressItem.classList.add("completed");
      progressItem.innerHTML = "‚úì";
    } else if (i === level) {
      progressItem.classList.add("active");
      progressItem.innerHTML = i + 1;
    } else {
      progressItem.innerHTML = i + 1;
    }
    
    modeProgress.appendChild(progressItem);
  }
}

function showModeSelection() {
  if (confirm("Deseja realmente trocar de modo? O progresso atual ser√° perdido.")) {
    initGame();
  }
}

function showDifficultySelection() {
  document.getElementById("difficultySelection").style.display = "block";
  document.getElementById("answers").innerHTML = "";
  document.getElementById("question").innerHTML = "<strong>Selecione a nova dificuldade:</strong>";
  document.getElementById("startBtn").style.display = "block";
  document.getElementById("startBtn").innerText = "üéÆ Continuar com Nova Dificuldade";
  document.getElementById("difficultyBtn").style.display = "none";
  document.getElementById("modeBtn").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  
  clearInterval(timer);
  gameStarted = false;
  stopCountdownSound();
}

// CORRE√á√ÉO: Fun√ß√£o atualizada para mostrar cora√ß√µes corretamente
function updateAllStats() {
  document.getElementById("score").querySelector(".stat-value").innerText = score;
  document.getElementById("streakValue").innerText = streak;
  
  let hearts = "";
  const maxLives = difficultySettings[currentDifficulty].lives;
  for (let i = 0; i < maxLives; i++) {
    hearts += i < lives ? "‚ù§Ô∏è" : "ü§ç";
  }
  document.getElementById("hearts").innerHTML = hearts;
  
  // Desbloquear conquistas baseado na pontua√ß√£o
  if (score >= 50) unlockAchievement("ach1");
  if (score >= 100) unlockAchievement("ach2");
  if (score >= 150) unlockAchievement("ach3");
  if (score >= 200) unlockAchievement("ach4");
  if (score >= 250) unlockAchievement("ach5");
  if (streak >= 5) unlockAchievement("ach1");
  if (streak >= 10) unlockAchievement("ach2");
  if (currentDifficulty === 'hard' && score >= 100) unlockAchievement("ach5");
}

function updateCharacter() {
  document.getElementById("character").innerText = characters[level % characters.length];
}

function moveCharacter(progress) {
  const char = document.getElementById("character");
  char.style.left = (10 + progress * 80) + "%";
}

function updateProgressBar() {
  let totalQuestions = 0;
  let answeredQuestions = 0;
  
  if (currentMode === 1) {
    const currentLevels = mode1Levels[currentDifficulty];
    totalQuestions = currentLevels.reduce((total, lvl) => total + lvl.questions.length, 0);
    answeredQuestions = currentLevels.slice(0, level).reduce((total, lvl) => total + lvl.questions.length, 0) + questionIndex;
  } else {
    const currentLevels = mode2Levels[currentDifficulty];
    totalQuestions = currentLevels.reduce((total, lvl) => total + lvl.questions.length, 0);
    answeredQuestions = currentLevels.slice(0, level).reduce((total, lvl) => total + lvl.questions.length, 0) + questionIndex;
  }
  
  const progress = totalQuestions > 0 ? (answeredQuestions / totalQuestions) * 100 : 0;
  document.getElementById("progress").style.width = progress + "%";
}

function updateLevelIndicator() {
  document.getElementById("currentLevel").innerText = level + 1;
}

// CORRE√á√ÉO: Fun√ß√£o loadLevel aprimorada com verifica√ß√µes
function loadLevel() {
  let currentLevels;
  let originalQuestion;
  
  if (currentMode === 1) {
    currentLevels = mode1Levels[currentDifficulty];
  } else {
    currentLevels = mode2Levels[currentDifficulty];
  }
  
  // Verificar se o n√≠vel existe
  if (!currentLevels || currentLevels.length === 0) {
    console.error("Nenhum n√≠vel encontrado para a dificuldade atual");
    endGame();
    return;
  }
  
  // Verificar se o √≠ndice do n√≠vel √© v√°lido
  if (level < 0 || level >= currentLevels.length) {
    console.error("√çndice de n√≠vel inv√°lido:", level);
    endGame();
    return;
  }
  
  const currentLevel = currentLevels[level];
  
  // Verificar se h√° perguntas neste n√≠vel
  if (!currentLevel.questions || currentLevel.questions.length === 0) {
    console.error("Nenhuma pergunta encontrada no n√≠vel", level);
    endGame();
    return;
  }
  
  // Verificar se o √≠ndice da pergunta √© v√°lido
  if (questionIndex < 0 || questionIndex >= currentLevel.questions.length) {
    console.error("√çndice de pergunta inv√°lido:", questionIndex);
    // Resetar para primeira pergunta
    questionIndex = 0;
  }
  
  originalQuestion = currentLevel.questions[questionIndex];
  
  // Criar uma c√≥pia da pergunta para embaralhar as alternativas
  const shuffledQuestion = {
    q: originalQuestion.q,
    a: [...originalQuestion.a],
    c: originalQuestion.c,
    explanation: originalQuestion.explanation,
    learning: originalQuestion.learning
  };
  
  const correctAnswerText = shuffledQuestion.a[shuffledQuestion.c];
  shuffledQuestion.a = shuffleArray(shuffledQuestion.a);
  shuffledQuestion.c = shuffledQuestion.a.indexOf(correctAnswerText);
  
  currentQuestionData = shuffledQuestion;
  
  document.getElementById("question").innerHTML = `
    <div class="difficulty-tag ${currentDifficulty}-tag">${currentDifficulty.toUpperCase()}</div>
    ${shuffledQuestion.q}
  `;
  
  const ansDiv = document.getElementById("answers");
  ansDiv.innerHTML = "";

  shuffledQuestion.a.forEach((text, i) => {
    const btn = document.createElement("button");
    btn.innerText = text;
    btn.className = "answer-btn";
    btn.onclick = () => check(i);
    ansDiv.appendChild(btn);
  });
  
  document.getElementById("feedback").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  
  resetTimer();
}

// CORRE√á√ÉO: Fun√ß√£o para mostrar tela de fim de jogo quando as vidas acabam
function showGameOverScreen() {
  const currentLevels = currentMode === 1 ? mode1Levels[currentDifficulty] : mode2Levels[currentDifficulty];
  let totalQuestionsInLevel = 0;
  let questionsAnsweredInLevel = 0;
  
  if (currentLevels && currentLevels[level]) {
    totalQuestionsInLevel = currentLevels[level].questions ? currentLevels[level].questions.length : 0;
    questionsAnsweredInLevel = Math.min(questionIndex + 1, totalQuestionsInLevel);
  }
  
  document.getElementById("title").innerHTML = "üòî Fim de Jogo";
  document.getElementById("question").innerHTML = `
    <div style="text-align: center; padding: 20px; background: linear-gradient(135deg, #ff6b6b, #ff8e8e); border-radius: 10px; color: white;">
      <h3 style="margin-bottom: 10px;">Suas vidas acabaram!</h3>
      <p style="margin: 5px 0;">üéØ N√≠vel atual: ${level + 1}</p>
      <p style="margin: 5px 0;">‚ùì Perguntas respondidas: ${questionsAnsweredInLevel}</p>
      <p style="margin: 5px 0;">‚≠ê Pontua√ß√£o total: ${score} pontos</p>
      <p style="margin: 5px 0;">üî• Maior sequ√™ncia: ${streak} acerto(s) seguidos</p>
      <p style="margin-top: 15px; font-weight: bold;">Deseja tentar novamente?</p>
    </div>
  `;
  
  document.getElementById("answers").innerHTML = "";
  document.getElementById("feedback").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("startBtn").style.display = "block";
  document.getElementById("startBtn").innerText = "üîÑ Tentar Novamente";
  document.getElementById("difficultyBtn").style.display = "block";
  document.getElementById("modeBtn").style.display = "block";
  document.getElementById("reviewBtn").style.display = "block";
  document.getElementById("certificate").style.display = "none";
  
  gameStarted = false;
  clearInterval(timer);
  stopCountdownSound();
}

// CORRE√á√ÉO: Fun√ß√£o check aprimorada
function check(choice) {
  if (!gameStarted || !currentQuestionData) return;
  
  clearInterval(timer);
  stopCountdownSound();
  const answerButtons = document.querySelectorAll(".answer-btn");
  
  answerButtons.forEach(btn => {
    btn.onclick = null;
    btn.style.pointerEvents = "none";
  });
  
  const feedback = document.getElementById("feedback");
  feedback.style.display = "block";
  
  const settings = difficultySettings[currentDifficulty];
  
  // CORRE√á√ÉO: Calcular pontos antes de verificar a resposta
  let pointsEarned = settings.points;
  
  if (choice === currentQuestionData.c) {
    // Resposta correta
    answerButtons[choice].classList.add("correct");
    
    // B√¥nus por sequ√™ncia
    if (streak > 0) {
      pointsEarned += Math.floor(streak * 2);
    }
    
    // CORRE√á√ÉO: Pontua√ß√£o mais justa
    const difficultyMultiplier = currentDifficulty === 'easy' ? 1 : 
                                currentDifficulty === 'medium' ? 1.5 : 2;
    pointsEarned = Math.floor(pointsEarned * difficultyMultiplier);
    
    score += pointsEarned;
    streak++;
    correctInLevel++;
    
    updateAllStats();
    playSound('correct');
    
    feedback.innerHTML = `<strong>üéâ Correto! +${pointsEarned} pontos</strong><br>${currentQuestionData.explanation}<br><br><strong>üìö Aprendizado:</strong> ${currentQuestionData.learning}`;
    feedback.className = "correct";
    
    document.getElementById("character").classList.add("character-jump");
    setTimeout(() => {
      document.getElementById("character").classList.remove("character-jump");
    }, 500);
    
  } else {
    // Resposta incorreta
    answerButtons[choice].classList.add("incorrect");
    answerButtons[currentQuestionData.c].classList.add("correct");
    lives--;
    streak = 0;
    updateAllStats();
    playSound('incorrect');
    
    // Registrar resposta errada para revis√£o
    let originalQuestion;
    const currentLevels = currentMode === 1 ? mode1Levels[currentDifficulty] : mode2Levels[currentDifficulty];
    
    if (currentLevels[level] && currentLevels[level].questions && currentLevels[level].questions[questionIndex]) {
      originalQuestion = currentLevels[level].questions[questionIndex];
      
      wrongAnswers.push({
        question: originalQuestion.q,
        correctAnswer: originalQuestion.a[originalQuestion.c],
        explanation: originalQuestion.explanation,
        learning: originalQuestion.learning,
        difficulty: currentDifficulty,
        mode: currentMode,
        userAnswer: currentQuestionData.a[choice]
      });
      
      feedback.innerHTML = `<strong>‚ùå Incorreto! Resposta correta: ${originalQuestion.a[originalQuestion.c]}</strong><br>${originalQuestion.explanation}<br><br><strong>üìö Aprendizado:</strong> ${originalQuestion.learning}`;
    } else {
      feedback.innerHTML = "<strong>‚ùå Incorreto!</strong><br>Infelizmente, ocorreu um erro ao carregar os detalhes da quest√£o.";
    }
    
    feedback.className = "incorrect";
    
    document.getElementById("character").classList.add("character-sad");
    setTimeout(() => {
      document.getElementById("character").classList.remove("character-sad");
    }, 600);
  }
  
  // CORRE√á√ÉO: Atualizar progresso do personagem
  const currentLevels = currentMode === 1 ? mode1Levels[currentDifficulty] : mode2Levels[currentDifficulty];
  if (currentLevels[level] && currentLevels[level].questions) {
    const totalQuestionsInCurrentLevel = currentLevels[level].questions.length;
    const progress = (questionIndex + 1) / totalQuestionsInCurrentLevel;
    moveCharacter(progress);
    updateProgressBar();
  }
  
  updateStreakBadge();
  
  // CORRE√á√ÉO: Verificar se as vidas acabaram
  if (lives <= 0) {
    setTimeout(showGameOverScreen, 1500);
    return;
  }
  
  // Determinar se √© a √∫ltima pergunta
  const currentLevelsForCheck = currentMode === 1 ? mode1Levels[currentDifficulty] : mode2Levels[currentDifficulty];
  let totalQuestionsInCurrentLevel = 3; // padr√£o
  let isLastQuestionInLevel = false;
  let isLastLevel = false;
  
  if (currentLevelsForCheck[level] && currentLevelsForCheck[level].questions) {
    totalQuestionsInCurrentLevel = currentLevelsForCheck[level].questions.length;
    isLastQuestionInLevel = (questionIndex + 1) >= totalQuestionsInCurrentLevel;
    isLastLevel = (level + 1) >= currentLevelsForCheck.length;
  }
  
  // Sempre mostrar o bot√£o "Pr√≥xima"
  document.getElementById("nextBtn").style.display = "block";
  
  if (isLastQuestionInLevel && isLastLevel) {
    document.getElementById("nextBtn").innerText = "üèÅ Ver Resultados Finais";
  } else if (isLastQuestionInLevel) {
    document.getElementById("nextBtn").innerText = "‚è≠Ô∏è Avan√ßar para Pr√≥ximo N√≠vel";
  } else {
    document.getElementById("nextBtn").innerText = "‚è≠Ô∏è Pr√≥xima Pergunta";
  }
}

function showStreakBadge() {
  const badge = document.getElementById("streakBadge");
  badge.style.display = streak > 1 ? "block" : "none";
}

function updateStreakBadge() {
  const badge = document.getElementById("streakBadge");
  const count = document.getElementById("streakCount");
  
  if (streak > 1) {
    badge.style.display = "block";
    count.textContent = streak;
    
    if (streak >= 10) {
      badge.style.background = "linear-gradient(to right, #f59e0b, #fbbf24)";
    } else if (streak >= 5) {
      badge.style.background = "linear-gradient(to right, #10b981, #34d399)";
    } else {
      badge.style.background = "linear-gradient(to right, #3b82f6, #60a5fa)";
    }
  } else {
    badge.style.display = "none";
  }
}

function playCountdownSound() {
  if (!countdownSoundPlaying) {
    const countdownSound = document.getElementById("countdownSound");
    countdownSound.volume = 0.3;
    countdownSound.currentTime = 0;
    countdownSound.play().catch(e => console.log("Erro ao tocar som de contagem:", e));
    countdownSoundPlaying = true;
    
    setTimeout(() => {
      stopCountdownSound();
    }, 10000);
  }
}

function stopCountdownSound() {
  const countdownSound = document.getElementById("countdownSound");
  countdownSound.pause();
  countdownSound.currentTime = 0;
  countdownSoundPlaying = false;
  countdownStarted = false;
}

function playTimeoutSound() {
  const timeoutSound = document.getElementById("timeoutSound");
  timeoutSound.volume = 0.4;
  timeoutSound.currentTime = 0;
  timeoutSound.play().catch(e => console.log("Erro ao tocar som de tempo esgotado:", e));
}

// CORRE√á√ÉO: Fun√ß√£o nextQuestion mais robusta
function nextQuestion() {
  stopCountdownSound();
  
  // Incrementar √≠ndice da pergunta
  questionIndex++;
  
  // Obter os n√≠veis atuais
  const currentLevels = currentMode === 1 ? mode1Levels[currentDifficulty] : mode2Levels[currentDifficulty];
  
  // CORRE√á√ÉO: Verificar se o n√≠vel atual existe
  if (!currentLevels || currentLevels.length === 0) {
    endGame();
    return;
  }
  
  // CORRE√á√ÉO: Verificar se ainda h√° perguntas no n√≠vel atual
  if (questionIndex >= currentLevels[level].questions.length) {
    // Avan√ßar para o pr√≥ximo n√≠vel
    level++;
    questionIndex = 0;
    correctInLevel = 0;
    
    // Verificar se atingiu o √∫ltimo n√≠vel
    if (level >= currentLevels.length) {
      endGame();
      return;
    }
    
    // Atualizar interface para novo n√≠vel
    updateCharacter();
    moveCharacter(0);
    updateProgressBar();
    updateLevelIndicator();
    updateModeProgress();
    
    // Atualizar narrativa
    if (storyNarratives[currentMode] && storyNarratives[currentMode][level]) {
      document.getElementById("story-narrative").textContent = storyNarratives[currentMode][level];
    }
  }
  
  // Carregar a pr√≥xima pergunta
  loadLevel();
  startTimer();
}

function startTimer() {
  timeLeft = difficultySettings[currentDifficulty].time;
  document.getElementById("timeLeft").textContent = timeLeft;
  const timerElement = document.getElementById("timer").querySelector(".stat-value");
  timerElement.classList.remove("timer-warning", "timer-critical");
  
  clearInterval(timer);
  stopCountdownSound();
  countdownStarted = false;
  
  timer = setInterval(() => {
    timeLeft--;
    document.getElementById("timeLeft").textContent = timeLeft;
    
    if (timeLeft <= 10 && !countdownStarted) {
      playCountdownSound();
      countdownStarted = true;
    }
    
    if (timeLeft <= 10) {
      timerElement.classList.add("timer-warning");
    }
    
    if (timeLeft <= 5) {
      timerElement.classList.remove("timer-warning");
      timerElement.classList.add("timer-critical");
      
      if (!document.getElementById("character").classList.contains("character-thinking")) {
        document.getElementById("character").classList.add("character-thinking");
      }
    }
    
    if (timeLeft <= 0) {
      clearInterval(timer);
      stopCountdownSound();
      playTimeoutSound();
      timeUp();
    }
  }, 1000);
}

function timeUp() {
  if (!gameStarted || !currentQuestionData) return;
  
  const answerButtons = document.querySelectorAll(".answer-btn");
  answerButtons.forEach(btn => {
    btn.onclick = null;
    btn.style.pointerEvents = "none";
  });
  
  const feedback = document.getElementById("feedback");
  feedback.style.display = "block";
  feedback.innerHTML = "<strong>‚è∞ Tempo esgotado!</strong> Voc√™ perdeu uma vida.";
  feedback.className = "incorrect";
  
  // Registrar como resposta errada
  let originalQuestion;
  const currentLevels = currentMode === 1 ? mode1Levels[currentDifficulty] : mode2Levels[currentDifficulty];
  
  if (currentLevels[level] && currentLevels[level].questions && currentLevels[level].questions[questionIndex]) {
    originalQuestion = currentLevels[level].questions[questionIndex];
    
    wrongAnswers.push({
      question: originalQuestion.q,
      correctAnswer: originalQuestion.a[originalQuestion.c],
      explanation: originalQuestion.explanation,
      learning: originalQuestion.learning,
      difficulty: currentDifficulty,
      mode: currentMode,
      reason: "Tempo esgotado"
    });
  }
  
  lives--;
  streak = 0;
  updateAllStats();
  updateStreakBadge();
  
  answerButtons.forEach((btn, i) => {
    if (i === currentQuestionData.c) {
      btn.classList.add("correct");
    }
  });
  
  document.getElementById("character").classList.add("character-sad");
  document.getElementById("character").classList.remove("character-thinking");
  
  // Mostrar bot√£o "Pr√≥xima" ap√≥s tempo esgotado
  document.getElementById("nextBtn").style.display = "block";
  
  // Determinar o texto do bot√£o
  const currentLevelsForCheck = currentMode === 1 ? mode1Levels[currentDifficulty] : mode2Levels[currentDifficulty];
  const totalQuestionsInCurrentLevel = currentLevelsForCheck[level].questions.length;
  const isLastQuestionInLevel = (questionIndex + 1) >= totalQuestionsInCurrentLevel;
  const isLastLevel = (level + 1) >= currentLevelsForCheck.length;
  
  if (isLastQuestionInLevel && isLastLevel) {
    document.getElementById("nextBtn").innerText = "üèÅ Ver Resultados Finais";
  } else if (isLastQuestionInLevel) {
    document.getElementById("nextBtn").innerText = "‚è≠Ô∏è Avan√ßar para Pr√≥ximo N√≠vel";
  } else {
    document.getElementById("nextBtn").innerText = "‚è≠Ô∏è Pr√≥xima Pergunta";
  }
}

function resetTimer() {
  clearInterval(timer);
  stopCountdownSound();
  timeLeft = difficultySettings[currentDifficulty].time;
  document.getElementById("timeLeft").textContent = timeLeft;
  const timerElement = document.getElementById("timer").querySelector(".stat-value");
  timerElement.classList.remove("timer-warning", "timer-critical");
  document.getElementById("character").classList.remove("character-thinking");
  countdownStarted = false;
}

function endGame() {
  gameStarted = false;
  
  const title = document.getElementById("title");
  title.innerText = "FIM DO JOGO";
  
  document.getElementById("answers").innerHTML = "";
  document.getElementById("feedback").style.display = "none";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("startBtn").style.display = "block";
  document.getElementById("startBtn").innerText = "üîÑ Jogar Novamente";
  document.getElementById("difficultyBtn").style.display = "block";
  document.getElementById("modeBtn").style.display = "block";
  document.getElementById("backToModeBtn").style.display = "block";
  
  if (wrongAnswers.length > 0) {
    document.getElementById("reviewBtn").style.display = "block";
  }
  
  moveCharacter(1);
  clearInterval(timer);
  stopCountdownSound();
  document.getElementById("character").classList.remove("character-thinking", "character-sad");
  
  showCertificate();
}

// CORRE√á√ÉO: Sistema de pontua√ß√£o no certificado
function showCertificate() {
  const certificate = document.getElementById("certificate");
  const starsElement = document.getElementById("certificateStars");
  const certificateMessage = document.getElementById("certificateMessage");
  const finalMessage = document.getElementById("finalMessage");
  
  certificate.style.display = "block";
  
  // Calcular pontua√ß√£o m√°xima poss√≠vel
  let totalPossiblePoints = 0;
  const currentLevels = currentMode === 1 ? mode1Levels[currentDifficulty] : mode2Levels[currentDifficulty];
  
  if (currentLevels) {
    currentLevels.forEach(level => {
      if (level.questions) {
        // Cada pergunta vale pontos base + poss√≠veis b√¥nus
        totalPossiblePoints += level.questions.length * difficultySettings[currentDifficulty].points * 2;
      }
    });
  }
  
  // Se n√£o conseguimos calcular, usar um valor padr√£o baseado na dificuldade
  if (totalPossiblePoints === 0) {
    totalPossiblePoints = currentDifficulty === 'easy' ? 150 : 
                         currentDifficulty === 'medium' ? 240 : 300;
  }
  
  const percentage = (score / totalPossiblePoints) * 100;
  
  let starCount = 0;
  let stars = "";
  
  if (percentage >= 90) {
    starCount = 5;
    stars = "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê";
  } else if (percentage >= 70) {
    starCount = 4;
    stars = "‚≠ê‚≠ê‚≠ê‚≠ê";
  } else if (percentage >= 50) {
    starCount = 3;
    stars = "‚≠ê‚≠ê‚≠ê";
  } else if (percentage >= 30) {
    starCount = 2;
    stars = "‚≠ê‚≠ê";
  } else {
    starCount = 1;
    stars = "‚≠ê";
  }
  
  starsElement.innerHTML = stars;
  
  // Mensagens baseadas no desempenho
  const messages = {
    5: {
      easy: "üéñÔ∏è Iniciante √Ågil - Excelente dom√≠nio dos conceitos b√°sicos!",
      medium: "üéñÔ∏è Analista Pleno - Dom√≠nio excepcional das boas pr√°ticas!",
      hard: "üéñÔ∏è Mestre em Gest√£o de TI - Excel√™ncia na tomada de decis√µes complexas!"
    },
    4: {
      easy: "ü•â Assistente de TI - Bom conhecimento dos fundamentos!",
      medium: "ü•â Coordenador de TI - Excelente compreens√£o das pr√°ticas intermedi√°rias!",
      hard: "ü•â Diretor de Tecnologia - Habilidade not√°vel para lidar com situa√ß√µes cr√≠ticas!"
    },
    3: {
      easy: "ü•à Analista J√∫nior - Conhecimento satisfat√≥rio dos conceitos iniciais!",
      medium: "ü•à Especialista em Boas Pr√°ticas - Bom conhecimento das boas pr√°ticas!",
      hard: "ü•à L√≠der Estrat√©gico - Boa capacidade de an√°lise em cen√°rios complexos!"
    },
    2: {
      easy: "ü•á Especialista em Fundamentos - Conhecimento b√°sico adquirido!",
      medium: "ü•á Gerente de Projetos - Conhecimento intermedi√°rio adequado!",
      hard: "ü•á Especialista em Cen√°rios Complexos - Consegue enfrentar desafios complexos!"
    },
    1: {
      easy: "üèÖ Participante - Continue estudando para melhorar!",
      medium: "üèÖ Profissional em Forma√ß√£o - Continue se dedicando!",
      hard: "üèÖ Desafiador de Complexidades - Coragem para enfrentar cen√°rios dif√≠ceis!"
    }
  };
  
  const difficultyText = currentDifficulty === 'easy' ? 'F√ÅCIL' : 
                        currentDifficulty === 'medium' ? 'M√âDIO' : 'DIF√çCIL';
  
  certificateMessage.textContent = messages[starCount][currentDifficulty];
  finalMessage.innerHTML = `<strong>Pontua√ß√£o: ${score} pontos (${Math.round(percentage)}%)</strong><br>Dificuldade: ${difficultyText} | Modo: ${currentMode === 1 ? 'Desafio' : 'Simula√ß√£o'}`;
  
  // Determinar classe baseada no desempenho
  if (starCount >= 4) {
    finalMessage.className = "final-message manager-ready";
    playSound('victory');
  } else if (starCount === 3) {
    finalMessage.className = "final-message almost-ready";
  } else {
    finalMessage.className = "final-message needs-improvement";
  }
  
  certificate.style.animation = "fadeIn 1s";
}

function showReview() {
  document.getElementById("title").innerText = "üìö Revis√£o de Conte√∫do";
  document.getElementById("question").innerHTML = `<strong>Revise os conceitos que voc√™ errou (${wrongAnswers.length} quest√µes):</strong>`;
  
  let reviewContent = "";
  wrongAnswers.forEach((item, index) => {
    const reason = item.reason ? `<br><em>Motivo: ${item.reason}</em>` : "";
    const userAnswer = item.userAnswer ? `<br><em>Sua resposta: ${item.userAnswer}</em>` : "";
    const modeText = item.mode === 1 ? "Desafio" : "Simula√ß√£o";
    reviewContent += `
      <div style="margin-bottom: 15px; padding: 12px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #f72585; box-shadow: 0 3px 6px rgba(0,0,0,0.05);">
        <p style="margin: 0 0 6px 0; font-size: 13px;"><strong>Pergunta ${index + 1} (${modeText} - ${item.difficulty.toUpperCase()}):</strong> ${item.question}</p>
        <p style="margin: 0 0 6px 0; font-size: 13px;"><strong>‚úÖ Correta:</strong> ${item.correctAnswer}</p>
        <p style="margin: 0; font-size: 13px;"><strong>üìñ Explica√ß√£o:</strong> ${item.explanation}${userAnswer}${reason}</p>
      </div>
    `;
  });
  
  document.getElementById("answers").innerHTML = reviewContent;
  document.getElementById("reviewBtn").style.display = "none";
  document.getElementById("feedback").style.display = "none";
}

function playSound(type) {
  try {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    if (type === 'correct') {
      oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
      oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
      oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
      gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.5);
    } else if (type === 'incorrect') {
      oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
      oscillator.frequency.setValueAtTime(196, audioContext.currentTime + 0.1);
      gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.3);
    } else if (type === 'levelup') {
      oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
      oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
      oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
      oscillator.frequency.setValueAtTime(1046.5, audioContext.currentTime + 0.3);
      gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.6);
    } else if (type === 'victory') {
      oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
      oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
      oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
      oscillator.frequency.setValueAtTime(1046.5, audioContext.currentTime + 0.3);
      gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 1);
    }
  } catch (e) {
    console.log("Audio n√£o suportado neste navegador");
  }
}

function unlockAchievement(achievementId) {
  const achievement = document.getElementById(achievementId);
  if (!achievement.classList.contains("unlocked")) {
    achievement.classList.add("unlocked");
    
    achievement.style.transform = "scale(1.15)";
    setTimeout(() => {
      achievement.style.transform = "scale(1.08)";
    }, 300);
    
    const tooltip = achievement.querySelector('.achievement-tooltip');
    const originalText = tooltip.textContent;
    tooltip.textContent = `DESBLOQUEADO: ${originalText}`;
    tooltip.style.bottom = "40px";
    tooltip.style.opacity = "1";
    tooltip.style.background = "linear-gradient(to right, #3a0ca3, #4361ee)";
    
    setTimeout(() => {
      tooltip.textContent = originalText;
      tooltip.style.bottom = "40px";
      tooltip.style.background = "var(--dark)";
    }, 2000);
  }
}

// Inicializar o jogo
initGame();
document.getElementById("character").style.animation = "float 4s ease-in-out infinite";
</script>
</body>
</html>
